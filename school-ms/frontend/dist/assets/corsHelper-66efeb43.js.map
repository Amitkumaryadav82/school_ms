{"version":3,"file":"corsHelper-66efeb43.js","sources":["../../src/services/corsHelper.ts"],"sourcesContent":["/**\r\n * Helper utilities for handling CORS and making cross-origin requests\r\n * specifically for payment and fee-related functionality\r\n */\r\n\r\nimport axios, { AxiosRequestConfig } from 'axios';\r\nimport config from '../config/environment';\r\n\r\n/**\r\n * Creates a special request configuration for fee-related endpoints\r\n * that ensures all necessary CORS headers are included\r\n */\r\nexport const createFeeRequestConfig = (\r\n  additionalHeaders: Record<string, string> = {}\r\n): AxiosRequestConfig => {\r\n  const token = localStorage.getItem('token');\r\n  \r\n  return {\r\n    baseURL: config.apiUrl,\r\n    withCredentials: true,\r\n    headers: {\r\n      'Content-Type': 'application/json',\r\n      'Authorization': token ? `Bearer ${token}` : '',\r\n      'Cache-Control': 'no-cache, no-store, must-revalidate',\r\n      'Pragma': 'no-cache',\r\n      'Expires': '0',\r\n      ...additionalHeaders\r\n    }\r\n  };\r\n};\r\n\r\n/**\r\n * Makes a direct payment submission request with special CORS handling\r\n */\r\nexport const submitPaymentWithCorsHandling = async (paymentData: any): Promise<any> => {\r\n  console.log('Making payment request with special CORS handling:', paymentData);\r\n  \r\n  // Create a request config with all necessary headers\r\n  const requestConfig = createFeeRequestConfig();\r\n  \r\n  try {\r\n    // Make the request with axios directly\r\n    const response = await axios.post(\r\n      `${config.apiUrl}/api/fees/payments`, \r\n      paymentData,\r\n      requestConfig\r\n    );\r\n    \r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Payment request failed with CORS handling:', error);\r\n    throw error;\r\n  }\r\n};\r\n\r\nexport default {\r\n  createFeeRequestConfig,\r\n  submitPaymentWithCorsHandling\r\n};\r\n"],"names":["createFeeRequestConfig","additionalHeaders","token","config","submitPaymentWithCorsHandling","paymentData","requestConfig","axios","error","corsHelper"],"mappings":"sJAYO,MAAMA,EAAyB,CACpCC,EAA4C,KACrB,CACjB,MAAAC,EAAQ,aAAa,QAAQ,OAAO,EAEnC,MAAA,CACL,QAASC,EAAO,OAChB,gBAAiB,GACjB,QAAS,CACP,eAAgB,mBAChB,cAAiBD,EAAQ,UAAUA,CAAK,GAAK,GAC7C,gBAAiB,sCACjB,OAAU,WACV,QAAW,IACX,GAAGD,CACL,CAAA,CAEJ,EAKaG,EAAgC,MAAOC,GAAmC,CAC7E,QAAA,IAAI,qDAAsDA,CAAW,EAG7E,MAAMC,EAAgBN,IAElB,GAAA,CAQF,OANiB,MAAMO,EAAM,KAC3B,GAAGJ,EAAO,MAAM,qBAChBE,EACAC,CAAA,GAGc,WACTE,EAAO,CACN,cAAA,MAAM,6CAA8CA,CAAK,EAC3DA,CACR,CACF,EAEeC,EAAA,CACb,uBAAAT,EACA,8BAAAI,CACF"}