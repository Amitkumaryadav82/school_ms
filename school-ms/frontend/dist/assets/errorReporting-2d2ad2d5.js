const f={CORS:["has been blocked by CORS policy","Access-Control-Allow-Origin","Request header field","is not allowed by","preflight response","Network Error"],PAYMENT:["feeId","studentId","amount","Invalid payment","Payment failed","Fee structure not found"],FEE_NOT_FOUND:["Fee not found","with id:","404 Not Found","EntityNotFoundException"]},E=(e,o)=>{var n,a,i,l,t;const s=new Date().toISOString(),r=N(e);return{timestamp:s,errorType:r,message:e.message||"Unknown error",status:((n=e.response)==null?void 0:n.status)||"unknown",browser:navigator.userAgent,url:((a=e.config)==null?void 0:a.url)||"unknown",corsRelated:r==="CORS",validationRelated:r==="VALIDATION",feeNotFoundRelated:r==="FEE_NOT_FOUND",details:{responseData:(i=e.response)==null?void 0:i.data,responseHeaders:(l=e.response)==null?void 0:l.headers,requestHeaders:(t=e.config)==null?void 0:t.headers,paymentData:m(o)},errorStack:e.stack}},m=e=>{if(!e)return null;const o={...e};return delete o.cardNumber,delete o.cvv,delete o.pin,delete o.password,o},N=e=>{var o,s,r,g,n,a,i,l;return((o=e.response)==null?void 0:o.status)===404&&f.FEE_NOT_FOUND.some(t=>{var d,c,u,p;return((u=(c=(d=e.response)==null?void 0:d.data)==null?void 0:c.message)==null?void 0:u.includes(t))||((p=e.message)==null?void 0:p.includes(t))||e.toString().includes(t)})?"FEE_NOT_FOUND":f.CORS.some(t=>{var d,c,u,p;return((d=e.message)==null?void 0:d.includes(t))||e.toString().includes(t)||((p=(u=(c=e.response)==null?void 0:c.data)==null?void 0:u.message)==null?void 0:p.includes(t))})?"CORS":((s=e.response)==null?void 0:s.status)===400||(g=(r=e.response)==null?void 0:r.data)!=null&&g.validationErrors||(a=(n=e.response)==null?void 0:n.data)!=null&&a.fieldErrors?"VALIDATION":(i=e.message)!=null&&i.includes("Network Error")||!e.response?"NETWORK":((l=e.response)==null?void 0:l.status)>=500?"SERVER":"UNKNOWN"},O=(e,o)=>{const s=E(e,o);return console.group(`Payment Error Report [${s.timestamp}]`),console.error(`Error Type: ${s.errorType}`),console.error(`Message: ${s.message}`),console.error(`Status: ${s.status}`),s.corsRelated&&(console.error("This appears to be a CORS-related issue"),console.error("CORS Troubleshooting:"),console.error("1. Check backend CORS configuration"),console.error("2. Verify allowed origins and headers"),console.error("3. Ensure preflight requests are handled correctly")),s.validationRelated&&(console.error("This appears to be a validation error"),console.error("Validation details:",s.details.responseData)),s.errorType==="FEE_NOT_FOUND"&&(console.error('This is a "Fee not found" error'),console.error("Troubleshooting steps:"),console.error("1. Create a fee structure for the student's grade"),console.error("2. Check if the feeId parameter is correct"),console.error("3. Ensure the fee structure exists in the database"),console.error("4. Check the fee structure to payment mapping"),s.feeNotFoundRelated=!0),console.error("Full diagnostics:",s),console.groupEnd(),s},R={reportPaymentError:O,collectPaymentErrorDiagnostics:E};export{E as collectPaymentErrorDiagnostics,R as default,O as reportPaymentError};
//# sourceMappingURL=errorReporting-2d2ad2d5.js.map
