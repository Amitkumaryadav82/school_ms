{"version":3,"file":"debugUtils-77978ee5.js","sources":["../../src/utils/debugUtils.ts"],"sourcesContent":["import api from '../services/api';\r\n\r\nexport interface ApiTestEndpoint {\r\n  name: string;\r\n  fn: () => Promise<any>;\r\n}\r\n\r\nexport interface ApiTestResult {\r\n  name: string;\r\n  success: boolean;\r\n  status?: string | number;\r\n  data?: any;\r\n  error?: string;\r\n}\r\n\r\n/**\r\n * Debug utilities for troubleshooting data issues in the application\r\n */\r\nexport const inspectObject = (obj: any, label = 'Object Inspection'): void => {\r\n  console.group(label);\r\n  \r\n  if (obj === null) {\r\n    console.log('Object is null');\r\n    console.groupEnd();\r\n    return;\r\n  }\r\n  \r\n  if (obj === undefined) {\r\n    console.log('Object is undefined');\r\n    console.groupEnd();\r\n    return;\r\n  }\r\n  \r\n  // Log type information\r\n  console.log('Type:', typeof obj);\r\n  console.log('Is Array:', Array.isArray(obj));\r\n  \r\n  // Log properties\r\n  if (typeof obj === 'object') {\r\n    console.log('Keys:', Object.keys(obj));\r\n    console.log('Has prototype:', Object.getPrototypeOf(obj) !== null);\r\n    \r\n    // If it's an array, log length and first few items\r\n    if (Array.isArray(obj)) {\r\n      console.log('Array length:', obj.length);\r\n      console.log('First 3 items:', obj.slice(0, 3));\r\n      \r\n      // If array has items, inspect first item\r\n      if (obj.length > 0) {\r\n        console.log('First item type:', typeof obj[0]);\r\n        console.log('First item keys:', typeof obj[0] === 'object' ? Object.keys(obj[0]) : 'Not an object');\r\n      }\r\n    } else {\r\n      // Regular object\r\n      const sampleProps: Record<string, any> = {};\r\n      Object.keys(obj).forEach(key => {\r\n        const value = obj[key];\r\n        sampleProps[key] = {\r\n          type: typeof value,\r\n          isNull: value === null,\r\n          isUndefined: value === undefined,\r\n          isArray: Array.isArray(value),\r\n          sample: typeof value === 'object' ? (Array.isArray(value) ? `Array[${value.length}]` : 'Object') : value\r\n        };\r\n      });\r\n      \r\n      console.log('Properties:', sampleProps);\r\n    }\r\n  }\r\n  \r\n  console.groupEnd();\r\n};\r\n\r\n/**\r\n * Utility for testing API endpoints to diagnose connectivity issues\r\n * This separates diagnostic code from the main application components\r\n */\r\nexport const apiDiagnostics = {\r\n  /**\r\n   * Common test endpoints to try when diagnosing API issues\r\n   */\r\n  getCommonEndpoints(entityType: string): ApiTestEndpoint[] {\r\n    return [\r\n      { name: `Get all ${entityType} (api prefix)`, fn: () => api.get(`/${entityType}`) },\r\n      { name: `Get all ${entityType} (singular)`, fn: () => api.get(`/${entityType.slice(0, -1)}`) },\r\n      { name: 'Check auth status', fn: () => api.get('/auth/status') },\r\n    ];\r\n  },\r\n\r\n  /**\r\n   * Run a series of API tests to diagnose connectivity issues\r\n   */\r\n  async runApiTests(endpoints: ApiTestEndpoint[]): Promise<ApiTestResult[]> {\r\n    const results: ApiTestResult[] = [];\r\n    \r\n    for (const endpoint of endpoints) {\r\n      try {\r\n        console.log(`ðŸ§ª Testing endpoint: ${endpoint.name}`);\r\n        const response = await endpoint.fn();\r\n        results.push({\r\n          name: endpoint.name,\r\n          success: true,\r\n          status: 'OK',\r\n          data: response\r\n        });\r\n      } catch (e: any) {\r\n        results.push({\r\n          name: endpoint.name,\r\n          success: false,\r\n          status: e.status || 'Error',\r\n          error: e.message || JSON.stringify(e)\r\n        });\r\n      }\r\n    }\r\n    \r\n    return results;\r\n  }\r\n};\r\n\r\n/**\r\n * Utility for toggling between real and mock data during development\r\n * This should not be used in production\r\n */\r\nexport const debugStorage = {\r\n  /**\r\n   * Check if debug mode is enabled\r\n   */\r\n  isDebugModeEnabled(): boolean {\r\n    return localStorage.getItem('debug_mode') === 'true';\r\n  },\r\n  \r\n  /**\r\n   * Enable or disable debug mode\r\n   */\r\n  setDebugMode(enabled: boolean): void {\r\n    localStorage.setItem('debug_mode', enabled ? 'true' : 'false');\r\n  },\r\n  \r\n  /**\r\n   * Check if mock data mode is enabled\r\n   */\r\n  isMockModeEnabled(): boolean {\r\n    return localStorage.getItem('use_mock_data') === 'true';\r\n  },\r\n  \r\n  /**\r\n   * Enable or disable mock data mode\r\n   */\r\n  setMockMode(enabled: boolean): void {\r\n    localStorage.setItem('use_mock_data', enabled ? 'true' : 'false');\r\n  }\r\n};\r\n\r\n/**\r\n * Comprehensive logging utility for payment processing\r\n * Provides detailed debug information for payment-related operations\r\n */\r\nexport const debugPayment = (action: string, data: any, error?: any) => {\r\n  // Create a timestamp for the log\r\n  const timestamp = new Date().toISOString();\r\n  const prefix = `[PAYMENT DEBUG] [${timestamp}]`;\r\n  \r\n  console.group(`${prefix} ${action}`);\r\n  \r\n  // Log basic information\r\n  console.log('Action:', action);\r\n  console.log('Data:', data);\r\n  \r\n  // If we have payment-specific data, log detailed information\r\n  if (data.studentId) {\r\n    console.log('Student ID:', data.studentId);\r\n    console.log('Fee ID:', data.feeId || data.studentFeeId);\r\n    console.log('Amount:', data.amount);\r\n    console.log('Payment Method:', data.paymentMethod);\r\n  }\r\n  \r\n  // If there's an error, provide detailed error information\r\n  if (error) {\r\n    console.error('Error:', error);\r\n    \r\n    // Check for common error patterns\r\n    if (error.response?.status === 400) {\r\n      console.error('Validation Error Details:');\r\n      const errorData = error.response.data;\r\n      console.table(errorData);\r\n      \r\n      // Check field problems\r\n      const missingFields = [];\r\n      const requiredFields = ['feeId', 'studentId', 'amount', 'paymentMethod'];\r\n      \r\n      for (const field of requiredFields) {\r\n        if (!data[field] && !data[field === 'feeId' ? 'studentFeeId' : field]) {\r\n          missingFields.push(field);\r\n        }\r\n      }\r\n      \r\n      if (missingFields.length > 0) {\r\n        console.error('Missing required fields:', missingFields);\r\n      }\r\n    }\r\n  }\r\n  \r\n  console.groupEnd();\r\n  \r\n  // Return the original data or error for chaining\r\n  return error || data;\r\n};\r\n\r\n/**\r\n * Check if a payment object has all required fields according to backend requirements\r\n */\r\nexport const validatePaymentRequest = (payment: any): { valid: boolean; missingFields: string[] } => {\r\n  const requiredFields = [\r\n    'studentId',\r\n    'feeId', // Can also be studentFeeId\r\n    'amount',\r\n    'paymentMethod'\r\n  ];\r\n  \r\n  const missingFields = requiredFields.filter(field => {\r\n    if (field === 'feeId') {\r\n      return !payment.feeId && !payment.studentFeeId;\r\n    }\r\n    return !payment[field];\r\n  });\r\n  \r\n  return {\r\n    valid: missingFields.length === 0,\r\n    missingFields\r\n  };\r\n};"],"names":["inspectObject","obj","label","sampleProps","key","value","apiDiagnostics","entityType","api","endpoints","results","endpoint","response","e","debugStorage","enabled","debugPayment","action","data","error","prefix","_a","errorData","missingFields","requiredFields","field","validatePaymentRequest","payment"],"mappings":"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"}